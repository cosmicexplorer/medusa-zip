[package]
name                    = "medusa-zip"
version.workspace       = true
authors.workspace       = true
edition.workspace       = true
license.workspace       = true

keywords.workspace      = true
categories.workspace    = true
homepage.workspace      = true
repository.workspace    = true

[dependencies]
clap                    = { workspace = true }
displaydoc              = { workspace = true }
eyre                    = "0.6.8"
libmedusa-zip           = { path = "./libmedusa-zip" }
regex                   = "1"
serde_json              = "1.0"
thiserror               = { workspace = true }
tokio                   = { version = "1.29.1", features = ["io-util", "io-std", "macros", "rt-multi-thread"] }
zip                     = { workspace = true }

[workspace]
members                 = [
    ".",
    "./libmedusa-zip",
]
default-members         = [
    ".",
    "./libmedusa-zip",
]

[workspace.dependencies]
clap                    = { version = "4", features = ["derive"] }
displaydoc              = "0.2.4"
thiserror               = "1.0.30"
zip                     = { git = "https://github.com/cosmicexplorer/zip", rev = "869ebd491327a62344b24f0b4ce3686ba42d53cd", features = ["rayon", "merge"] }
# zip                     = { path = "/home/cosmicexplorer/tools/zip", features = ["rayon", "merge"] }

[workspace.package]
version                 = "0.0.0"
authors                 = ["Danny McClanahan <dmcC2@hypnicjerk.ai>"]
edition                 = "2021"
license                 = "Apache-2.0"

keywords                = ["zip", "file", "archive", "parallel", "bin"]
categories              = ["development-tools::build-utils", "filesystem", "asynchronous", "caching", "command-line-utilities"]
homepage                = "https://github.com/cosmicexplorer/medusa-zip"
repository              = "https://github.com/cosmicexplorer/medusa-zip"

# Use nicer docs features for docs.rs. See https://users.rust-lang.org/t/how-to-test-a-package-metadata-docs-rs-setting/53818.
[package.metadata.docs.rs]
all-features = true
rustdoc-args = ["--cfg", "docsrs"]

[profile.release]
strip = true
lto = true
